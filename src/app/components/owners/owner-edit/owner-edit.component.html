<div class="container mx-auto px-4 py-8">
  <div class="max-w-3xl mx-auto">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">Editar Propietario</h2>
    
    <!-- Mensaje de error -->
    <div *ngIf="errorMessage" class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded">
      <p>{{ errorMessage }}</p>
    </div>
    
    <!-- Formulario -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <form (ngSubmit)="onSubmit(ownerForm.value)" #ownerForm="ngForm" class="space-y-6">
        <!-- ID oculto -->
        <div class="hidden">
          <input type="text" id="id" [(ngModel)]="owner.id" name="id" />
        </div>
        
        <!-- Nombre -->
        <div class="space-y-2">
          <label for="firstName" class="block text-sm font-medium text-gray-700">Nombre</label>
          <div class="relative">
            <input 
              type="text" 
              class="input-field" 
              [class.border-red-500]="firstName.dirty && !firstName.valid"
              [class.border-green-500]="firstName.dirty && firstName.valid"
              id="firstName" 
              [(ngModel)]="owner.firstName" 
              minlength="1" 
              maxlength="30" 
              pattern="^[a-zA-Z]*$" 
              required 
              name="firstName" 
              #firstName="ngModel"
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
              <i *ngIf="firstName.valid && firstName.dirty" class="bi bi-check-circle-fill text-green-500"></i>
              <i *ngIf="!firstName.valid && firstName.dirty" class="bi bi-x-circle-fill text-red-500"></i>
            </div>
          </div>
          <div class="text-sm text-red-600 space-y-1">
            <p *ngIf="firstName.dirty && firstName.hasError('required')">El nombre es obligatorio</p>
            <p *ngIf="firstName.dirty && firstName.hasError('minlength')">El nombre debe tener al menos 1 carácter</p>
            <p *ngIf="firstName.dirty && firstName.hasError('maxlength')">El nombre no puede tener más de 30 caracteres</p>
            <p *ngIf="firstName.dirty && firstName.hasError('pattern')">El nombre solo puede contener letras</p>
          </div>
        </div>
        
        <!-- Apellido -->
        <div class="space-y-2">
          <label for="lastName" class="block text-sm font-medium text-gray-700">Apellido</label>
          <div class="relative">
            <input 
              type="text" 
              class="input-field" 
              [class.border-red-500]="lastName.dirty && !lastName.valid"
              [class.border-green-500]="lastName.dirty && lastName.valid"
              id="lastName" 
              [(ngModel)]="owner.lastName" 
              name="lastName" 
              minlength="1" 
              maxlength="30" 
              pattern="^[a-zA-Z]*$" 
              required 
              #lastName="ngModel"
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
              <i *ngIf="lastName.valid && lastName.dirty" class="bi bi-check-circle-fill text-green-500"></i>
              <i *ngIf="!lastName.valid && lastName.dirty" class="bi bi-x-circle-fill text-red-500"></i>
            </div>
          </div>
          <div class="text-sm text-red-600 space-y-1">
            <p *ngIf="lastName.dirty && lastName.hasError('required')">El apellido es obligatorio</p>
            <p *ngIf="lastName.dirty && lastName.hasError('minlength')">El apellido debe tener al menos 1 carácter</p>
            <p *ngIf="lastName.dirty && lastName.hasError('maxlength')">El apellido no puede tener más de 30 caracteres</p>
            <p *ngIf="lastName.dirty && lastName.hasError('pattern')">El apellido solo puede contener letras</p>
          </div>
        </div>
        
        <!-- Dirección -->
        <div class="space-y-2">
          <label for="address" class="block text-sm font-medium text-gray-700">Dirección</label>
          <div class="relative">
            <input 
              type="text" 
              class="input-field" 
              [class.border-red-500]="address.dirty && !address.valid"
              [class.border-green-500]="address.dirty && address.valid"
              id="address" 
              [(ngModel)]="owner.address" 
              name="address" 
              maxlength="255" 
              required 
              #address="ngModel"
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
              <i *ngIf="address.valid && address.dirty" class="bi bi-check-circle-fill text-green-500"></i>
              <i *ngIf="!address.valid && address.dirty" class="bi bi-x-circle-fill text-red-500"></i>
            </div>
          </div>
          <div class="text-sm text-red-600 space-y-1">
            <p *ngIf="address.dirty && address.hasError('required')">La dirección es obligatoria</p>
            <p *ngIf="address.dirty && address.hasError('maxlength')">La dirección no puede tener más de 255 caracteres</p>
          </div>
        </div>
        
        <!-- Ciudad -->
        <div class="space-y-2">
          <label for="city" class="block text-sm font-medium text-gray-700">Ciudad</label>
          <div class="relative">
            <input 
              type="text" 
              class="input-field" 
              [class.border-red-500]="city.dirty && !city.valid"
              [class.border-green-500]="city.dirty && city.valid"
              id="city" 
              [(ngModel)]="owner.city" 
              name="city" 
              maxlength="80" 
              required 
              #city="ngModel"
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
              <i *ngIf="city.valid && city.dirty" class="bi bi-check-circle-fill text-green-500"></i>
              <i *ngIf="!city.valid && city.dirty" class="bi bi-x-circle-fill text-red-500"></i>
            </div>
          </div>
          <div class="text-sm text-red-600 space-y-1">
            <p *ngIf="city.dirty && city.hasError('required')">La ciudad es obligatoria</p>
            <p *ngIf="city.dirty && city.hasError('maxlength')">La ciudad no puede tener más de 80 caracteres</p>
          </div>
        </div>
        
        <!-- Teléfono -->
        <div class="space-y-2">
          <label for="telephone" class="block text-sm font-medium text-gray-700">Teléfono</label>
          <div class="relative">
            <input 
              type="text" 
              class="input-field" 
              [class.border-red-500]="telephone.dirty && !telephone.valid"
              [class.border-green-500]="telephone.dirty && telephone.valid"
              id="telephone" 
              [(ngModel)]="owner.telephone" 
              name="telephone" 
              required 
              minlength="1" 
              maxlength="20" 
              pattern="^[0-9]*$" 
              #telephone="ngModel"
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
              <i *ngIf="telephone.valid && telephone.dirty" class="bi bi-check-circle-fill text-green-500"></i>
              <i *ngIf="!telephone.valid && telephone.dirty" class="bi bi-x-circle-fill text-red-500"></i>
            </div>
          </div>
          <div class="text-sm text-red-600 space-y-1">
            <p *ngIf="telephone.dirty && telephone.hasError('required')">El teléfono es obligatorio</p>
            <p *ngIf="telephone.dirty && telephone.hasError('minlength')">El teléfono debe tener al menos 1 dígito</p>
            <p *ngIf="telephone.dirty && telephone.hasError('maxlength')">El teléfono no puede tener más de 20 dígitos</p>
            <p *ngIf="telephone.dirty && telephone.hasError('pattern')">El teléfono solo puede contener números</p>
          </div>
        </div>
        
        <!-- Botones -->
        <div class="flex justify-between pt-4">
          <button 
            type="button" 
            class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" 
            (click)="gotoOwnerDetail(owner)"
          >
            <i class="bi bi-arrow-left mr-2"></i> Volver
          </button>
          <button 
            type="submit" 
            class="btn-primary" 
            [disabled]="!ownerForm.valid"
          >
            Actualizar Propietario
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
  
